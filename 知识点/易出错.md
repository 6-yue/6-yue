2022-4-22 今日目标

#### 复习Git以及Ajax
哎呀，今天学习的内容好生的难呀~
```js
<script>
    const xhr=new XMLHttpRequest()
    xhr.open('GET',URL)
    xhr.send()
    xhr.addEventListener('load',function(){
      console.log(JSON.parse(xhr.response))
      console.log(JSON.parse(xhr.response).data)
      console.log(JSON.parse(xhr.response).data[0])
      console.log(JSON.parse(xhr.response).data[0].title)
    })
  </script>
```

#### 有价值的知识

1. axios封装
2. 常规的增删改查
3. 插件化的全局组件注册
4. 通用工具栏组件封装
5. 导入导出的前端实现
6. 基于el-upload二次封装上传组件
7. 树形数据处理以及各种数据的格式化

#### 数组渲染

```js
console.log(this.list)
	this.list.forEach((item)=>{
	console.log(item.questionIDs)
})
```

#### 回调函数

```js
说人话就是, 一个函数A,作为另一个函数B的参数,那么函数A就被称为回调函数。 对,回调函数A就是一个普普通通的函数,它被其他函数B作为参数在B的内部调用,那么在这个时候A才能被称为B的回调函数。 回调函数这个概念是相互的,一个单独的函数是无法叫做回调函数的,它只能被称为XXX(被谁在内部调用)的回调函数
```

#### token报错

```js
检查是否是请求头填写错误,以下为模板
```

```js
// 封装axios
import axios from 'axios'
import store from '@/store' // 不要在除了组件之外的地方使用useStore函数
// 1.实例化 baseURL timeout
const instance = axios.create({
  baseURL: '',
  timeout: 5000
})
// 2.请求拦截器 token注入
instance.interceptors.request.use((config) => {
  // 在发送请求之前做些什么
  // config添加一个token 必须return 如果不return 请求没有参数
  const token = store.state.user.profile.token
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
}, (error) => {
  // 对请求错误做些什么
  return Promise.reject(error)
})
// 3.响应拦截器 数据简化使用 token 失效
instance.interceptors.response.use((response) => {
  // 2xx 范围内的状态码都会触发该函数
  // 对响应数据做些什么
  return response
}, (error) => {
  // 超出 2xx 范围的状态码都会触发该函数
  // 对响应错误做点什么
  return Promise.reject(error)
})

/**
 * 需求:封装一个请求函数 作用是为了适配get/post请求,简化请求参数
 * function request(user,method,data) {
 *  // 完成一个兼容get 和 post 的请求发送
 * }
 * request('a.com','GET',{ name:'cp'}).then(res=>{})
 * request('a.com','POST',{ name:'cp'}).then(res=>{})
 *
 * 健壮性问题:不要期待用户可以正确的输入
 */

export function request (url, method, data) {
  // 1.调用接口 2.把接口调用之后的promise对象返回
  return instance({
    url,
    method,
    // 这里的key不是固定的,根据方法动态改变的 get - params post - data
    [method.toLowerCase() === 'get' ? 'params' : 'data']: data
  })
}

```

#### filter && reduce 方法

```js
selectedPrice (state) {
      return state.cartList.filter(item => item.selected).reduce((p, c) => p + c.price, 0)
    }
```

#### 获取当前星期

```js
'星期'+'日一二三四五六'.charAt(new Date().getDay())
```

